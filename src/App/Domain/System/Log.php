<?phpnamespace App\Domain\System;use App\Common\CommonDomain;use App\Model\System\Log as ModelLog;use function App\nowTime;/** * 系统日志类 * * @author lws */class Log extends CommonDomain{    private static $Model = null;    public function __construct()    {        if (self::$Model == null) {            self::$Model = new ModelLog();        }    }    /**获取日志列表     * @param $param     * @return array 数据对象     */    public function getList($param)    {        if (!is_array($param)) {            $param = get_object_vars($param);        }        if (isset($param['keyWord'])) {            $param['where']["content LIKE ? or id = ? "] = array("%" . $param['keyWord'] . "%",$param['keyWord']);        }        if (isset($param['search_date']) and count($param['search_date']) > 0) {            $param['where']["add_time >= ? "] = $param['search_date'][0];            $param['where']["add_time <= ? "] = date('Y-m-d H:i:s', strtotime($param['search_date'][1]) + 24 * 3600);        }        $list = self::$Model->getList($param);        if ($list['list']) {            $model_user = new \App\Model\User\User();            foreach ($list['list'] as &$item) {                if ($item) {                    $user = $model_user->get($item['user_id'], 'account');                    $item['account'] = $user['account'];                }            }            unset($item);        }        return $list;    }    public static function addLog($content, $user_id = 0)    {        $param = array();        $service = \PhalApi\DI()->request->get('service');        $param['content'] = $content;        $param['user_id'] = $user_id;        $param['service'] = $service;        $param['add_time'] = nowTime();        $model = new ModelLog();        return $model->insert($param);    }}