<?phpnamespace App\Domain\System;use function App\addLog;use App\Common\CommonDomain;use App\Common\Exception\WrongRequestException;use function App\nowTime;/** * 站点配置类 * * @author lws */class Setting extends CommonDomain{    private static $Model = null;    public function __construct()    {        if (self::$Model == null) {            self::$Model = new \App\Model\System\Setting();        }    }    public function getSetting($set_name)    {        return json_decode(self::$Model->getInfo(array('set_name'=>$set_name))['value']);    }    public function doSetting($name,$data)    {        $param = json_decode($data);        if($name == 'base_setting'){            if (!$param->site_name) {                throw new WrongRequestException('请输入站点名称', 1);            }        }        $result = self::$Model->updateByWhere(array('set_name'=>$name),array('value'=>$data));        if ($result === false) {            throw new WrongRequestException('保存失败', 6);        }        addLog('修改系统配置，配置项：' . $name);    }}