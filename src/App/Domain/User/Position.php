<?phpnamespace App\Domain\User;use function App\addLog;use App\Common\CommonDomain;use App\Common\Exception\WrongRequestException;use function App\nowTime;/** * 用户职位配置类 * * @author lws */class Position extends CommonDomain{    private static $Model = null;    public function __construct()    {        if (self::$Model == null) {            self::$Model = new \App\Model\User\Position();        }    }    public function getList($param)    {        if (!is_array($param)) {            $param = get_object_vars($param);        }        if (isset($param['keyWord'])) {            $param['where']["position_name LIKE ? or eng_name LIKE ? or position_desc LIKE ? "] = array("%" . $param['keyWord'] . "%", "%" . $param['keyWord'] . "%", "%" . $param['keyWord'] . "%");        }        $list = self::$Model->getList($param);        return $list;    }    public function getUserList($param)    {        if (!is_array($param)) {            $param = get_object_vars($param);        }        $position_id = $param['position_id'];        unset($param['position_id']);        $param['where'] = array('position_id'=>$position_id);        $domain_user = new User();        return $domain_user->getUserList($param);    }    public function getInfo($where, $field = '*')    {        $info = self::$Model->getInfo($where, $field);        return $info;    }    /** 删除职位     * @param $ids id列表 如1,2,3     * @return int     */    public function delPosition($ids)    {        $result = self::$Model->delItems($ids);        if ($result) {            $ids = json_encode($ids);            addLog("删除职位，编号：$ids");        }        return $result == true ? 0 : 1;    }    /**     *  新增职位     * @param $data     * @throws WrongRequestException     */    public function addPosition($data)    {        $data['create_time'] = nowTime();        $id = self::$Model->insert($data);        if ($id === false) {            throw new WrongRequestException('新增失败', 8);        }        addLog('新增职位，编号：' . $id);    }    public function editPosition($id, $data)    {        $result = self::$Model->update($id, $data);        if ($result === false) {            throw new WrongRequestException('保存失败', 6);        }        addLog('修改职位，评级ID：' . $id);    }}