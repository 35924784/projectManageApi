<?phpnamespace App\Domain\Project;use function App\addLog;use App\Common\CommonDomain;use App\Common\Exception\WrongRequestException;use function App\nowTime;/** * 项目评级类 * * @author lws */class Level extends CommonDomain{    private static $Model = null;    public function __construct()    {        if (self::$Model == null) {            self::$Model = new \App\Model\Project\Level();        }    }    public function getList($param)    {        if (!is_array($param)) {            $param = get_object_vars($param);        }        if (isset($param['keyWord'])) {            $param['where']["level_name LIKE ? or money = ? "] = array("%" . $param['keyWord'] . "%",$param['keyWord']);        }        $list = self::$Model->getList($param);        return $list;    }    public function getInfo($where,$field = '*')    {        return self::$Model->getInfo($where,$field);    }    /** 删除等级     * @param $ids id列表 如1,2,3     * @return int     */    public function delLevel($ids)    {        $result = self::$Model->delItems($ids);        if ($result) {            $ids = json_encode($ids);            addLog("删除项目等级，编号：$ids");        }        return $result == true ? 0 : 1;    }    /**     *  新增等级     * @param $data     * @throws WrongRequestException     */    public function addLevel($data)    {        $data['create_time'] = nowTime();        $id = self::$Model->insert($data);        if ($id === false) {            throw new WrongRequestException('新增失败', 8);        }        addLog('新增等级，编号：' . $id);    }    public function editProjectLevel($id,$data)    {        $result = self::$Model->update($id,$data);        if ($result === false) {            throw new WrongRequestException('保存失败', 6);        }        addLog('修改项目评级，评级ID：' . $id);    }}